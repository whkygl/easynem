library(easynem
)
bac <- read_nem(tab = easynem_example("bacotu.csv"), tax = easynem_example("bactax.csv"), meta = easynem_example("meta.csv"))
sum_columns <- function(a, b) {
# 检查参数
if (!is.data.frame(a)) {
stop("参数 a 必须是数据框")
}
if (!all(b %in% colnames(a))) {
stop("参数 b 中的列名必须存在于数据框 a 中")
}
# 生成新的列名
new_col_name <- paste(b, collapse = "_")
# 计算指定列的和
a[[new_col_name]] <- rowSums(a[, b, drop = FALSE])
return(a)
}
df <- data.frame(
A = c(1, 2, 3),
B = c(4, 5, 6),
C = c(7, 8, 9),
D = c(10, 11, 12)
)
View(df)
# 调用自定义函数
result <- sum_columns(df, c("A", "B", "C"))
View(result)
# 调用自定义函数
result <- sum_columns(df, c("A", "B", "D"))
View(result)
class(bac@meta)
?all
bac@meta
trans_combine <- function(data, col){
meta = data@meta
if (!all(col %in% colnames(meta))) {
stop("col must be present in the meta")
}
new_col_name <- paste(col, collapse = "_")
meta[[new_col_name]] <- rowSums(meta[, col, drop = FALSE])
data@meta = meta
return(data)
}
reasult = trans_combine(bac, c("pH","NH4"))
View(reasult)
result@meta
resault@meta
result = trans_combine(bac, c("pH","NH4"))
result@meta
View(result)
result@meta
result@meta$pH_NH4
