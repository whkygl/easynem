# 定义S4的easynem类
setClass("easynem",
slots = list(
tab = "data.frame",
tax = "data.frame",
meta = "data.frame"
))
easynem <- new("easynem")
# 定义可向easynem类添加元素的read_tab函数
read_tab <- function(filename, ...){
tab = read.csv(filename, ...)
easynem@tab = tab
return(easynem)
}
# 同理，定义其他读入函数
read_tax <- function(filename, ...){
tax = read.csv(filename, ...)
easynem@tax = tax
return(easynem)
}
read_meta <- function(filename, ...){
meta = read.csv(filename, ...)
easynem@meta = meta
return(easynem)
}
bac <- read_tab("bacotu.csv")
View(bac)
bac <- read_tax("bactax.csv")
View(bac)
bac <- read_tab("bacotu.csv") %>% read_tax("bactax.csv")
library(tidyverse)
bac <- read_tab("bacotu.csv") %>% read_tax("bactax.csv")
class(bac)
# 定义S4的easynem类
setClass("easynem",
slots = list(
tab = "data.frame",
tax = "data.frame",
meta = "data.frame"
))
easynem <- new("easynem")
# 定义可向easynem类添加元素的read_tab函数
read_nem <- function(tab, tax, meta, ...){
tab = read.csv(filename, ...)
easynem@tab = tab
easynem@tax = tax
easynem@meta = meta
return(easynem)
}
hehe <- read_nem(tab = "bacotu.csv")
# 定义S4的easynem类
setClass("easynem",
slots = list(
tab = "data.frame",
tax = "data.frame",
meta = "data.frame"
))
easynem <- new("easynem")
# 定义可向easynem类添加元素的read_tab函数
read_nem <- function(tab, tax, meta, ...){
tab = read.csv(tab, ...)
tax = read.csv(tax, ...)
meta = read.csv(meta, ...)
easynem@tab = tab
easynem@tax = tax
easynem@meta = meta
return(easynem)
}
hehe <- read_nem(tab="bacotu.csv", meta = "meta.csv", tax = "bactax.csv")
View(hehe)
?read.csv
hehe <- read_nem(tab="bacotu.csv", row.names = TRUE)
hehe <- read_nem(tab = "bacotu.csv", header = FALSE)
hehe <- read_nem(tab = "bacotu.csv")
hehe <- read_nem(tab = "bacotu.csv", meta = "meta.csv", tax = "bactax.csv")
hehe <- read_nem(tab = "bacotu.csv")
# 定义可向easynem类添加元素的read_tab函数
read_nem <- function(tab, tax, meta, ...){
tab = read.csv(tab, ...)
# tax = read.csv(tax, ...)
# meta = read.csv(meta, ...)
easynem@tab = tab
easynem@tax = tax
easynem@meta = meta
return(easynem)
}
hehe <- read_nem(tab = "bacotu.csv")
# 定义可向easynem类添加元素的read_tab函数
read_nem <- function(tab, tax, meta, ...){
tab = read.csv(tab, ...)
# tax = read.csv(tax, ...)
# meta = read.csv(meta, ...)
easynem@tab = tab
# easynem@tax = tax
# easynem@meta = meta
return(easynem)
}
hehe <- read_nem(tab = "bacotu.csv")
View(hehe)
hehe@tax
hehe@tab
hehe <- read_nem(tab = "bacotu.csv",header=FALSE)
hehe@tab
View(hehe)
hehe@tax
# 定义可向easynem类添加元素的read_tab函数
read_nem <- function(tab=0, tax=0, meta=0, ...){
tab = read.csv(tab, ...)
tax = read.csv(tax, ...)
meta = read.csv(meta, ...)
easynem@tab = tab
easynem@tax = tax
easynem@meta = meta
return(easynem)
}
hehe <- read_nem(tab = "bacotu.csv", meta = "meta.csv", tax = "bactax.csv")
View(hehe)
hehe <- read_nem(tab = "bacotu.csv",header=FALSE)
# 定义S4的easynem类
setClass("easynem",
slots = list(
tab = "data.frame",
tax = "data.frame",
meta = "data.frame"
))
easynem <- new("easynem")
# 定义可向easynem类添加元素的read_tab函数
read_nem <- function(tab=0, tax=0, meta=0, ...){
if(tab != 0){
tab = read.csv(tab, ...)
easynem@tab = tab
} else {
cat("tab\n")
warning("Otutab has not been imported yet")
}
if(tax != 0){
tax = read.csv(tax, ...)
easynem@tax = tax
} else {
cat("tab\n")
warning("Taxonomy has not been imported yet")
}
if(meta != 0){
meta = read.csv(meta, ...)
easynem@meta = meta
} else {
cat("tab\n")
warning("Metadata has not been imported yet")
}
return(easynem)
}
hehe <- read_nem(tab = "bacotu.csv", meta = "meta.csv", tax = "bactax.csv")
View(hehe)
hehe <- read_nem(tab = "bacotu.csv")
hehe <- read_nem(tab = "bacotu.csv", meta = "meta.csv")
hehe <- read_nem(tab = "bacotu.csv")
hehe <- read_nem()
hehe <- read_nem(tab = "bacotu.csv", meta = "meta.csv", header = FALSE)
# 定义可向easynem类添加元素的read_tab函数
read_nem <- function(tab=0, tax=0, meta=0, ...){
if(tab != 0){
tab = read.csv(tab, ...)
easynem@tab = tab
} else {
warning("Otutab has not been imported yet")
}
if(tax != 0){
tax = read.csv(tax, ...)
easynem@tax = tax
} else {
warning("Taxonomy has not been imported yet")
}
if(meta != 0){
meta = read.csv(meta, ...)
easynem@meta = meta
} else {
warning("Metadata has not been imported yet")
}
return(easynem)
}
hehe <- read_nem(tab = "bacotu.csv", meta = "meta.csv", tax = "bactax.csv")
hehe <- read_nem(tab = "bacotu.csv")
hehe <- read_nem(tab = "bacotu.csv", meta = "meta.csv", header = FALSE)
hehe <- read_nem()
hehe <- read_nem(tab = "bacotu.csv", meta = "meta.csv", header = FALSE)
hehe@tab
hehe@tax
hehe@meta
# 定义S4的easynem类
setClass("easynem",
slots = list(
tab = "data.frame",
tax = "data.frame",
meta = "data.frame"
))
.easynem <- new("easynem")
# 定义可向easynem类添加元素的read_tab函数
read_nem <- function(tab=0, tax=0, meta=0, ...){
if(tab != 0){
tab = read.csv(tab, ...)
.easynem@tab = tab
} else {
warning("Otutab has not been imported yet")
}
if(tax != 0){
tax = read.csv(tax, ...)
.easynem@tax = tax
} else {
warning("Taxonomy has not been imported yet")
}
if(meta != 0){
meta = read.csv(meta, ...)
.easynem@meta = meta
} else {
warning("Metadata has not been imported yet")
}
return(.easynem)
}
# hehe <- read_nem(tab = "bacotu.csv", meta = "meta.csv", tax = "bactax.csv")
# hehe <- read_nem(tab = "bacotu.csv")
# hehe <- read_nem(tab = "bacotu.csv", meta = "meta.csv", header = FALSE)
# hehe <- read_nem()
hehe <- read_nem(tab = "bacotu.csv", meta = "meta.csv", tax = "bactax.csv")
View(read_nem)
View(hehe)
summary(hehe)
show(hehe)
print(object@tab)
print(hehe@tab)
?read_csv
read_csv(readr_example("mtcars.csv"))
dplyr::read_csv(readr_example("mtcars.csv"))
hehe <- dplyr::read_csv(readr_example("mtcars.csv"))
hehe <- tidyverse::read_csv(readr_example("mtcars.csv"))
read_csv(readr_example("mtcars.csv"))
?readr_example
readr_example("challenge.csv")
class(read_csv(readr_example("mtcars.csv")))
library(dplyr)
print(dplyr::as_tibble(hehe@tab))
??read_csv
# 定义S4的easynem类
setClass("easynem",
slots = list(
tab = "tbl_df",
tax = "tbl_df",
meta = "tbl_df"
))
rm(list = ls())
# 定义S4的easynem类
setClass("easynem",
slots = list(
tab = "data.frame",
tax = "data.frame",
meta = "data.frame"
))
.easynem <- new("easynem")
# 定义可向easynem类添加元素的read_tab函数
read_nem <- function(tab=0, tax=0, meta=0, ...){
if(tab != 0){
tab = readr::read_csv(tab, show_col_types = FALSE, ...)
.easynem@tab = tab
} else {
warning("Otutab has not been imported yet")
}
if(tax != 0){
tax = readr::read_csv(tax, show_col_types = FALSE, ...)
.easynem@tax = tax
} else {
warning("Taxonomy has not been imported yet")
}
if(meta != 0){
meta = readr::read_csv(meta, show_col_types = FALSE, ...)
.easynem@meta = meta
} else {
warning("Metadata has not been imported yet")
}
return(.easynem)
}
# hehe <- read_nem(tab = "bacotu.csv", meta = "meta.csv", tax = "bactax.csv")
# hehe <- read_nem(tab = "bacotu.csv")
# hehe <- read_nem(tab = "bacotu.csv", meta = "meta.csv", col_names = FALSE)
# hehe <- read_nem()
# 重新改写S4对象"easynem"的show方法
setMethod("show", "easynem", function(object){
cat("This is an easynem object\n")
cat("The otutab is:\n")
print(object@tab)
cat("The taxonomy is:\n")
print(object@tax)
cat("The metadata is:\n")
print(object@meta)
})
hehe <- read_nem(tab = "bacotu.csv", meta = "meta.csv", tax = "bactax.csv")
hehe
